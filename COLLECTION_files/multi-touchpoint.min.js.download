window.Adimo=window.Adimo||{},window.Adimo.multiTouchpoint||(window.Adimo.multiTouchpoint={consts:{buttonSelector:".adimo-multi-touchpoint",buttonTouchpointAttribute:"data-static-touchpoint-identifiers",campaignsApiUrl:"https://campaigns-api.adimo.co"},init:function(){function a(){return b("localStorage")?window.localStorage:b("sessionStorage")?window.sessionStorage:x}function b(a){var b;try{b=window[a];var c="__storage_test__";return b.setItem(c,c),b.removeItem(c),!0}catch(d){return d instanceof DOMException&&(22===d.code||1014===d.code||"QuotaExceededError"===d.name||"NS_ERROR_DOM_QUOTA_REACHED"===d.name)&&b&&0!==b.length}}function c(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function d(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function e(a,b,c,e,f){for(var g=c.split(","),h=0;h<g.length;h++){var i=g[h],j={};if(j.type=b.toLowerCase(),j.tpid=i||null,j.isMobile=d()?"1":"0",j.host=e||"",j.source=f||"",window.XMLHttpRequest){var k=new XMLHttpRequest;k.open("POST",a),k.setRequestHeader("Content-Type","application/json; charset=utf-8"),k.send(JSON.stringify(j))}}}function f(a,b){var c=a.split(",")[0],d=window.Adimo.multiTouchpoint.consts.campaignsApiUrl+"/api/campaigns/getCampaign?touchpointIdentifier="+encodeURIComponent(c),e=k();if(window.XMLHttpRequest){var f=new XMLHttpRequest;f.addEventListener("load",function(){try{g(JSON.parse(this.responseText),"Engagement",e,a,b)}catch(c){}}),f.open("GET",d,!0),f.send()}}function g(b,c,e,f,g){if(b.useNewCookieBanner){if(!("true"===a().getItem(w+"cookie-analytics")))return}e=e||{};var h={type:c,step:0,message:""};h.commonParams=b.commonParams,h.commonParams.url=window.location.href,h.commonParams.campaignId=b.commonParams.campaignId||null,h.commonParams.isMobile=d();var i={touchpointIdentifer:f,medium:"Multi-touchpoint",host:b.trackingParams.host?b.trackingParams.host:null,keyword:b.trackingParams.keyword?b.trackingParams.keyword:null,ipAddress:b.trackingParams.ipAddress?b.trackingParams.ipAddress:null,region:b.trackingParams.region?b.trackingParams.region:null};e.source&&(i.source=e.source),e.medium&&(i.medium=e.medium),e.term&&(i.term=e.term),e.content&&(i.content=e.content),e.campaign&&(i.campaign=e.campaign),h.trackingParams=i,h.trackingParams.touchpoint="Multi-touchpoint","Engagement"===c&&g&&(h.additionalParameters={isAutoOpen:!0});var j=window.Adimo.multiTouchpoint.consts.campaignsApiUrl+"/api/tracking/trackEvent";if(window.XMLHttpRequest){var k=new XMLHttpRequest;k.open("POST",j,!0),k.setRequestHeader("Content-Type","application/json; charset=utf-8"),k.send(JSON.stringify(h))}}function h(a){var b=(j("a_open")||"").trim().toLowerCase().replace(/^,+/,"").replace(/,+$/,""),c=b.split(",");"true"===b&&(v=a[0]);for(var g=0;g<a.length;g++){var h=a[g];if("true"===h.getAttribute("data-setup"))return;if(e("https://4dvq37jqcg.execute-api.eu-west-1.amazonaws.com/prod/send","Multi-touchpoint",h.getAttribute(window.Adimo.multiTouchpoint.consts.buttonTouchpointAttribute),null,j("utm_source")),h.addEventListener("click",function(a){a.preventDefault();var b=this.getAttribute(window.Adimo.multiTouchpoint.consts.buttonTouchpointAttribute);if(b){var c=d();F=!1;var e="adimo-frame-multi-touchpoint-"+b.replace(/[^a-z0-9\-\_]/gi,"-"),g=window.Adimo.multiTouchpoint.consts.campaignsApiUrl;window.ADIMO_DOMAIN&&(g=window.ADIMO_DOMAIN);var h=k(),j="true"===this.getAttribute("data-do-not-track"),o="true"===this.getAttribute("data-dismiss-cookie-notification"),u=g+"/Conversions/ConvertStaticTouchpointsToMultiTouchpointUrl?touchpointIdentifiers="+encodeURIComponent(b)+"&frameId="+encodeURIComponent(e)+l(h)+"&isMobile="+(c?"true":"false")+"&userSessionId="+encodeURIComponent(r)+(j?"&doNotTrack=true":"")+(o?"&dismissCookieNotification=true":"");C=document.createElement("div"),C.classList.add("adimo-lightbox-overlay"),C.style.position="fixed",C.style["z-index"]="2147483646",C.style.left="0",C.style.top="0",C.style.right="0",C.style.bottom="0",C.style["background-color"]="black",C.style.transition=m+"ms opacity ease-in-out",C.style.opacity="0",document.body.appendChild(C),s=getComputedStyle(document.body).getPropertyValue("overflow")||"visible",t=getComputedStyle(document.body).getPropertyValue("position")||"static",document.body.style.overflow="hidden",setTimeout(function(){C.style.opacity="0.5"}),D=document.createElement("aside"),D.classList.add("adimo-lightbox-container"),D.setAttribute("id",e),D.style.position=A?"absolute":"fixed",D.style["z-index"]="2147483647",c?(D.style.left="0",D.style.top="0",D.style.right="0",D.style.height="455px"):(D.style.left=p+"px",D.style.top=n+"px",D.style.right=q+"px",D.style.height="220px"),D.style.margin="auto",D.style["max-width"]="1000px",B&&(D.style.width="1000px"),D.style["background-color"]="white",D.style.opacity="1",D.style.transition=m+"ms opacity ease-in-out",D.style["box-shadow"]="5px 5px 5px rgba(0,0,0,0.5)",E=document.createElement("iframe"),E.classList.add("adimo-lightbox-iframe"),E.style.position="absolute",E.style.left="0",E.style.top="0",E.style.right="0",E.style.bottom="0",E.style.border="none",E.style.width="100%",E.style.height=c?"455px":"220px",E.setAttribute("src",u),E.setAttribute("allow","geolocation *;"),D.appendChild(E),document.body.appendChild(D),C.addEventListener("click",function(){i()}),A&&window.scrollTo(0,0);try{f(b,v===this)}catch(a){}v&&(v=null)}}),h.setAttribute("data-setup","true"),!v){if("true"===(h.getAttribute("data-auto-open")||"").trim().toLowerCase())v=h;else if(c.length>0){var o=h.getAttribute(window.Adimo.multiTouchpoint.consts.buttonTouchpointAttribute).trim().toLowerCase().replace(/^,+/,"").replace(/,+$/,"").split(","),u=o.every(function(a){return-1!==c.indexOf(a)});u&&(v=h)}}}}function i(){D&&(D.style.opacity=0,setTimeout(function(){document.body.removeChild(D),document.body.style.overflow=s,document.body.style.position=t,D=null,E=null},m)),C&&(C.style.opacity="0",setTimeout(function(){document.body.removeChild(C),C=null},m))}function j(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function k(){var a={source:j("utm_source")||null,medium:j("utm_medium")||null,term:j("utm_term")||null,content:j("utm_content")||null,campaign:j("utm_campaign")||null},b=((document.referrer||"").split("/")[2]||"").toLowerCase(),c=(window.location.href.split("/")[2]||"").toLowerCase();if(b&&b!==c){a.source=a.source||b;if(j("gclid")&&(a.medium="paid search"),!a.medium){var d=-1!==b.indexOf(".google.")||-1!==b.indexOf(".yahoo.")||-1!==b.indexOf(".bing.")||-1!==b.indexOf("duckduckgo.");a.medium=d?"organic search":"referral"}}return a}function l(a){var b="";return b+=a.source?"&utm_source="+encodeURIComponent(a.source):"",b+=a.medium?"&utm_medium="+encodeURIComponent(a.medium):"",b+=a.term?"&utm_term="+encodeURIComponent(a.term):"",b+=a.content?"&utm_content="+encodeURIComponent(a.content):"",b+=a.campaign?"&utm_campaign="+encodeURIComponent(a.campaign):""}var m=300,n=50,o=50,p=20,q=20,r=c(),s=null,t=null,u=document.querySelectorAll(window.Adimo.multiTouchpoint.consts.buttonSelector),v=null;new MutationObserver(function(a,b){var c=document.querySelectorAll(window.Adimo.multiTouchpoint.consts.buttonSelector);c.length>0&&h(c)}).observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0}),h(u);var w="Adimo_",x={items:{},getItem:function(a){return this.items[a]},setItem:function(a,b){this.items[a]=b},removeItem:function(a){delete this.items[a]}},y=function(){var a=window.navigator.userAgent,b=a.indexOf("OS ");return(a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1)&&b>-1?window.Number(a.substr(b+3,3).replace("_",".")):-1},z=d()?y():-1,A=z<=12&&-1!==z,B=!!window.MSInputMethodContext&&!!window.document.documentMode,C=null,D=null,E=null,F=!1;window.addEventListener("resize",function(){if(D&&E&&F){var a=d(),b=window.innerHeight,c=b-(a?0:n+o);D.style.height=c+"px",E.style.height=c+"px"}}),window.addEventListener("message",function(b){var c=b.data||{};if("localStorageEvent"!==b.data.type){if("BuyNowEvent"===c.event&&window.dataLayer&&(window.dataLayer.some(function(a){try{return a.label==b.data.label}catch(b){return!1}})||window.dataLayer.push(b.data)),"Adimo_MultiTouchpoint_Selector"===c.type){if("expanded"===c.message){if(!D||!E||F)return;var e=d();F=!0;var f=window.innerHeight,g=f-(e?0:n+o);D.style.height=g+"px",E.style.height=g+"px"}return"close"===c.message?void i():void 0}}else{var h=a();if(!E)return;if("get"===b.data.method)E.contentWindow.postMessage({type:"localStorageEvent",method:"get",key:b.data.key,value:h.getItem(w+b.data.key)},"*");else if("getAll"===b.data.method){var j={};(b.data.keys||[]).forEach(function(a){j[a]=h.getItem(w+a)}),E.contentWindow.postMessage({type:"localStorageEvent",method:"getAll",keys:b.data.keys,items:j},"*")}else"set"===b.data.method?(h.setItem(w+b.data.key,b.data.value),E.contentWindow.postMessage({type:"localStorageEvent",method:"set",key:b.data.key},"*")):"remove"===b.data.method&&(h.removeItem(w+b.data.key),E.contentWindow.postMessage({type:"localStorageEvent",method:"remove",key:b.data.key},"*"))}}),v&&v.click()}},"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?window.Adimo.multiTouchpoint.init():document.addEventListener("DOMContentLoaded",function(){window.Adimo.multiTouchpoint.init()}));